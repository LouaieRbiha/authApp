<section>
  <h1>Login story - Fake Database</h1>
  <p>Connect with <span class="connect_info">user:user</span></p>
</section>

<form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
  <mat-form-field>
    <mat-label>Username</mat-label>
    <input matInput formControlName="username" />
    <mat-icon matSuffix>person</mat-icon>

    @if ( loginForm.controls.username?.invalid &&
    (loginForm.controls.username?.dirty || loginForm.controls.username?.touched)
    ) {
    <mat-error> Username is required. </mat-error>
    }
  </mat-form-field>

  <mat-form-field MatFormFieldControl="password">
    <mat-label>Password</mat-label>
    <input
      matInput
      [type]="isPasswordVisible ? 'text' : 'password'"
      formControlName="password"
    />
    <mat-icon
      class="password_visibility"
      matSuffix
      (click)="isPasswordVisible = !isPasswordVisible"
      >{{ isPasswordVisible ? 'visibility_off' : 'visibility' }}</mat-icon
    >

    @if ( loginForm.controls.password?.invalid &&
    (loginForm.controls.password?.dirty || loginForm.controls.password?.touched)
    ) {
    <mat-error> Password is required. </mat-error>
    }
  </mat-form-field>

  @if (invalidCredentials) {
  <mat-error>The username or password you entered is incorrect.</mat-error>
  }

  <div class="auth_actions">
    <span>Forgot password ?</span>
    <span>Register</span>
  </div>

  <button mat-flat-button type="submit">
    @if (loading) {
    <mat-progress-spinner
      class="white-spinner"
      diameter="20"
      mode="indeterminate"
    >
    </mat-progress-spinner>
    } @if (!loading) {
    <span>Login</span>
    }
  </button>
</form>
